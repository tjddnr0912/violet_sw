# 자동매매 종목 발굴 및 매매 방법 (Auto Trading Methods)

## 1. 종목 발굴 (Stock Selection)
자동매매의 첫 단계는 "어떤 종목을 살 것인가"를 결정하는 것입니다. 키움증권 API에서는 **조건검색(Condition Search)** 기능이 가장 강력하고 효율적인 도구입니다.

### 1.1. 키움증권 조건검색 (Condition Search)
*   **개념**: 사용자가 HTS(영웅문)에서 미리 설정한 조건(예: 거래량 급증, 이평선 정배열, 특정 캔들 패턴 등)을 만족하는 종목을 실시간으로 찾아주는 기능.
*   **장점**: 복잡한 연산을 서버에서 처리하여 결과만 API로 전송받으므로 속도가 빠르고 효율적임.
*   **활용 방법**:
    1.  HTS(화면번호 0150)에서 나만의 조건식 작성 및 저장.
    2.  Python API(`GetConditionLoad`, `SendCondition`)를 통해 해당 조건식을 호출.
    3.  실시간으로 조건에 포착된 종목 코드를 수신.

### 1.2. 퀀트 필터링 (Quant Filtering)
*   **개념**: 전 종목의 재무 데이터나 가격 데이터를 가져와서 직접 필터링하는 방식.
*   **방법**: PER, PBR, ROE 등 재무 지표나 1년치 주가 데이터를 분석하여 상위 N개 종목 선정.
*   **단점**: 데이터 양이 많아 실시간 처리가 어려울 수 있음. 주로 장 시작 전이나 마감 후 배치(Batch) 작업으로 수행.

---

## 2. 매매 방법 (Trading Execution)
종목이 선정되면 "언제, 얼마나 사고팔 것인가"를 결정해야 합니다.

### 2.1. 진입 전략 (Entry Strategy)
*   **조건 만족 즉시 진입**: 조건검색식에 포착되자마자 시장가 혹은 현재가로 매수. (스캘핑, 급등주 매매에 적합)
*   **눌림목 매수**: 포착 후 주가가 특정 지지선(예: 5분봉 20선)까지 내려왔을 때 매수.
*   **분할 매수**: 리스크 분산을 위해 자금을 3~5등분하여 시차를 두고 매수.

### 2.2. 청산 전략 (Exit Strategy) - 익절/손절
*   **목표가 청산 (Target Profit)**: 매수가 대비 +N% 도달 시 매도.
*   **손절가 청산 (Stop Loss)**: 매수가 대비 -N% 도달 시 매도 (필수).
*   **트레일링 스탑 (Trailing Stop)**: 고점 대비 N% 하락 시 매도. 수익을 극대화하면서 하락 반전 시 이익을 보존하는 전략.
*   **시간 청산 (Time Cut)**: 매수 후 N분/N시간 동안 수익이 나지 않으면 매도. (기회비용 관리)
*   **조건 이탈 청산**: 매수 근거가 된 조건(예: 이평선 지지)이 깨지면 매도.

---

## 3. 시스템 구성 요소 (System Components)
성공적인 자동매매를 위해 필요한 기술적 요소들입니다.

1.  **API 연동 모듈**: 로그인, 접속 상태 확인, 쿼리 제한(1초당 5회 등) 관리.
2.  **데이터 매니저**: 실시간 체결 데이터(틱 데이터), 호가 데이터 수신 및 처리.
3.  **전략 매니저**: 수신된 데이터를 바탕으로 매수/매도 시그널 생성.
4.  **주문 매니저**: 시그널에 따라 실제 주문(시장가/지정가) 전송 및 미체결 주문 관리.
5.  **계좌 매니저**: 예수금, 보유 종목, 수익률 실시간 모니터링.
6.  **로깅 & 알림**: 모든 동작을 로그로 남기고, 중요 이벤트(체결, 에러) 발생 시 텔레그램/슬랙 등으로 알림.
