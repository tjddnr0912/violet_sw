# 키움증권 Open API 및 모의투자 설정 가이드

본 가이드는 키움증권 Open API를 사용하여 자동매매 시스템을 구축하기 위한 환경 설정 방법을 설명합니다.

## 1. 키움증권 계좌 개설 및 Open API 신청
1.  **계좌 개설**: 키움증권 비대면 계좌 개설 앱을 통해 계좌를 개설합니다.
2.  **Open API 신청**: [키움증권 Open API 홈페이지](https://www1.kiwoom.com/h/customer/download/VOpenApiInfoView)에서 '사용 신청'을 합니다.
3.  **모듈 다운로드**: Open API+ 모듈을 다운로드하여 설치합니다.

## 2. 모의투자 신청 (필수)
실제 자금을 사용하기 전에 안전성을 검증하기 위해 반드시 상시 모의투자를 신청해야 합니다.
1.  [키움증권 상시모의투자](https://www1.kiwoom.com/h/mock/dom/VMockTotalSystemView) 페이지 접속.
2.  **참가 신청**: 모의투자 참가 신청을 진행합니다. (3개월 단위로 갱신 필요)
3.  **계좌 확인**: 신청 후 발급된 모의투자 계좌번호를 확인합니다.

## 3. KOA Studio 설치 및 활용
*   Open API 모듈 설치 시 함께 설치되는 `KOA Studio`는 API 기능을 테스트하고 개발 가이드를 볼 수 있는 필수 도구입니다.
*   개발 중 TR 번호(opt10081 등)나 화면 번호 등을 확인할 때 유용합니다.

## 4. API 로그인 및 자동 로그인 설정
> [!IMPORTANT]
> **로그인 방식의 특이점**: 키움 Open API는 보안상의 이유로 코드 내에서 ID/PW를 입력하여 로그인하는 것을 지원하지 않습니다. 반드시 제공되는 **로그인 창(OCX)**을 통해서만 로그인이 가능합니다. 따라서 `.env` 파일에 비밀번호를 저장하는 방식은 사용할 수 없습니다.

### 자동 로그인 설정 방법
매번 비밀번호를 입력하는 번거로움을 줄이기 위해 '계좌비밀번호 저장' 및 '자동 로그인' 기능을 설정할 수 있습니다.
1.  Windows 작업 표시줄 우측 하단의 '번개 모양 아이콘'(Open API 트레이 아이콘) 우클릭 -> **계좌비밀번호 저장**.
2.  모의투자 계좌 비밀번호(보통 `0000`) 입력 후 등록.
3.  로그인 창에서 ID 저장 및 **Auto Login(자동 로그인)** 체크.
    *   *주의: 자동 로그인을 설정하면 프로그램 실행 시 즉시 로그인이 진행되므로 보안에 유의하세요.*

## 5. 환경 변수 (.env) 설정
로그인 정보는 코드에 넣을 수 없지만, **계좌번호**나 **운영 모드(실투자/모의투자)** 등은 `.env` 파일로 관리하는 것이 좋습니다.

프로젝트 루트에 `.env` 파일을 생성하고 아래와 같이 설정하세요.

```env
# .env file
# 운영 모드: REAL (실투자) / MOCK (모의투자)
TRADING_MODE=MOCK

# 사용할 계좌번호 (모의투자 신청 후 발급받은 계좌번호)
ACCOUNT_NO=81xxxxxxxxx
```

## 6. 주의사항
*   **32비트 환경**: 키움 Open API는 32비트 환경에서만 동작합니다. Python도 반드시 32비트 버전을 설치해야 합니다. (Anaconda 32bit 가상환경 추천)
*   **운영 시간**: 모의투자 서버도 실제 장 운영 시간(09:00 ~ 15:30)과 유사하게 동작하며, 장 종료 후에는 일부 데이터 조회가 제한될 수 있습니다.
